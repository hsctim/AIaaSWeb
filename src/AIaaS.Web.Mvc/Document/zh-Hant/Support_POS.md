
# 加入至您的自助服務設備(POS)
ChatPal&#46;Ai 內建工作流程功能，協助您輕易地將 ChatPal&#46;Ai 加入至您現有的自助服務設備內，讓您的自助服務設備(POS)可以完全透過語音問答方式達成各智能項的服務。

若 ChatPal&#46;Ai 應用在電信繳費自助服務裝置，以下是它的繳費流程，
>1. 詢問服務項目，例如**繳費**或其它服務項目。
>2. 若是**繳費**，詢問**電信門號**。
>3. 請求**確認**繳費金額。
>4. 請求**選擇付款工具**，例如信用卡或其它支付工具。
>5. 請求將支付工具靠近支付感應處後**進行繳費**。
>6. **回應繳費結果**。

您可以按照以下步驟將ChatPal&#46;Ai應用在您的自助服務設備，
1. 在ChatPal&#46;Ai內建立一個問答機器人，並在問答機器人的設定內開啟**WebAPI**功能。
	
2. 建立問答機器人的**工作流程**， 
	您可以建立一個**工作流程**，名稱可設定為**繳費流程**。
3. 建立**繳費流程**內的**工作流程狀態**，你可以依序建立以下的**工作流程狀態**，
 
|狀態名稱|預測失敗處理|連續三次預測失敗處理|
|---|---|---|
|`輸入門號`|維持目前工作流狀態|離開工作流|
|`確認繳款金額`|維持目前工作流狀態|離開工作流|
|`選擇支付工具`|維持目前工作流狀態|離開工作流|
|`再次確認繳款金額`|維持目前工作流狀態|離開工作流|
|`放置支付感應處`|維持目前工作流狀態|離開工作流|
|`繳款成功`|維持目前工作流狀態|離開工作流|
|`繳款失敗`|維持目前工作流狀態|離開工作流|

4. 加入您的問答內容，例如，加入問題為**查繳帳單**，並設定為進入繳費流程。	以下是簡易的設定範例，

|問題|答案|目前工作流狀態|下一個工作流狀態|說明|
|---|---|---|---|---|
|查繳帳單<br/>繳費<br/>繳電信費||未定義|輸入門號|進入繳費流程|
|`[輸入門號]`||輸入門號|確認繳款金額|`*1`|
|確認<br/>下一步||確認繳款金額|選擇支付工具||
|信用卡||選擇支付工具|再次確認繳款金額||
|確認<br/>下一步||再次確認繳款金額|放置支付感應處||
|`[繳款成功]`||放置支付感應處|繳款成功|`*2`|
|`[繳款失敗]`||放置支付感應處|繳款失敗|`*3`|
|回主選單||繳款失敗|未定義|退出繳費流程|

> *1. 程式確認門號輸入後，可使用`SetWorkFlowState` WebAPI或特定問題(`[輸入門號]`)通知ChatPal&#46;Ai進入下一個狀態。
> \
> *. 程式確認已支付成功後，可使用`SetWorkFlowState` WebAPI或特定問題(`[繳款成功]`)通知ChatPal&#46;Ai進入下一個狀態。
> \
> *3. 程式確認已支付失敗後，可使用`SetWorkFlowState` WebAPI或特定問題(`[繳款失敗]`)通知ChatPal&#46;Ai進入下一個狀態。


5. 使用**語音轉換成文字(Speech-to-Text)** 將語音內容以文字方式傳送至ChatPal&#46;Ai，ChatPal&#46;Ai會回預測的答案及目前的工作流程狀態。

	您的自助服務設備可使用Http Post方式呼叫ChatPal&#46;Ai所提供的WebAPI進行通訊，這是最可靠且最容易的傳輸方式。
	
	以下是ChatPal&#46;Ai提供的WebAPI, 
> - **SendMessage** 
> \
> 傳送一個問題至ChatPal&#46;Ai，並接收ChatPal.Ai回傳的答案。
> 
> - **GetMessage**
> \
> 接收由ChatPal&#46;Ai傳送的訊息，如果由客服代替機器人回應問題或傳送訊息，您的設備可透過`GetMessage`接收客服所傳送來的訊息。
> \
> `GetMessage`使用**Long Polling**方式接收由ChatPal&#46;Ai所傳送的訊息，若60秒內無任何訊息，會回傳空值(`[]`)。
> - **SetWorkFlowState**
> \
> 	如果您的自助服務設備提供額外的輸入裝置，例如，在觸控螢幕上點擊繳費按鈕，並將工作流程狀態變更為 **輸入門號** ，您的設備必須使用**SetWorkFlowState**通知ChatPal&#46;Ai將目前的工作流程狀態已變更為**輸入門號**。
 	- **GetWorkflowState**
> \
> 您的自助服務設備可使用`GetWorkflowState`向ChatPal&#46;Ai查詢目前的工作流狀態。

6. 您可以將ChatPal&#46;Ai回應的答案透過**文字轉語音**方式撥放合成語音，如果您有相對應真人語音檔，可播放真人語音檔。

為了讓你的自助服務設備可以提供客戶最好的自助服務體驗，您可以規劃更完整的工作流程，例如，可以在繳費流程的任何狀態下接受任意地變更支付工具或門號，不而不是能回到特定像使用觸控螢幕一樣只能回特定狀態才能接受上一步驟才能變更支付工具或門號。您的自助服務設備應要具備類似口語般的服務模式，而非選項式的服務模式，這可以提供客戶較好的使用體驗，但您的工作流程設定可能會較，但這能回變更支付工具或門號複雜。

## 建議的內容
